---
title: "Spring Boot 3 성능 최적화: p95 지연시간 줄이는 실전 방법"
summary: "Spring Boot 3 환경에서 p95 지연시간을 효과적으로 줄이기 위한 구체적인 튜닝 기법을 다룹니다. 네이티브 이미지 활용, Reactive WebFlux 적용, JVM 및 스레드 풀 튜닝, 그리고 클라우드 네이티브 환경에서의 리소스 관리까지 실무에 바로 적용 가능한 방법을 사례와 함께 설명합니다."
date: "2026-02-13"
slug: "spring-boot-3-p95"
category: "spring-backend"
canonical_url: "https://example.dev/blog/spring-boot-3-p95"
tags: ["spring-backend", "backend-engineering", "performance", "spring-boot-3"]
sources:
  - title: "Spring Boot 3.0 Goes GA"
    url: "https://spring.io/blog/2023/11/24/spring-boot-3-0-goes-ga"
  - title: "Spring Boot 공식 프로젝트 페이지"
    url: "https://spring.io/projects/spring-boot#overview"
  - title: "Martin Fowler - Observability in Microservices"
    url: "https://martinfowler.com/articles/observability-in-microservices.html"
  - title: "Cloudflare Blog - Cloud Native Performance Optimization"
    url: "https://blog.cloudflare.com/cloud-native-performance-optimization/"
---

## Problem

대규모 서비스 운영 시, 평균 응답시간보다 p95(95번째 백분위수) 지연시간이 사용자 경험에 더 큰 영향을 미칩니다. 특히 Spring Boot 기반 애플리케이션에서는 초기화 지연, 동시 요청 처리 병목, GC 지연 등이 p95 지연시간을 악화시키는 주요 원인입니다. 기존 튜닝 방식으로는 평균 지연시간 개선에 집중하는 경향이 있어, p95 최적화에는 한계가 있습니다.

예를 들어, 트래픽 급증 시 특정 요청이 블로킹되어 전체 서비스 응답성이 저하되는 현상이 빈번히 발생합니다. 이런 문제를 해결하지 않으면 SLA 위반과 사용자 이탈로 이어질 수 있습니다.

## Core Idea

Spring Boot 3는 네이티브 이미지 지원과 Reactive WebFlux를 통한 비동기 논블로킹 처리, 그리고 Micrometer 기반 메트릭 수집 기능을 강화하여 p95 지연시간 최적화에 적합한 플랫폼을 제공합니다. 

- **네이티브 이미지 지원**: GraalVM 네이티브 이미지 빌드를 통해 애플리케이션 시작 시간과 메모리 사용량을 크게 줄여 초기 지연시간을 개선합니다. ([Spring Boot 3.0 Goes GA](https://spring.io/blog/2023/11/24/spring-boot-3-0-goes-ga))

- **Reactive WebFlux**: 비동기 논블로킹 I/O 처리로 I/O 병목을 완화하여 p95 지연시간을 줄입니다. 특히 데이터베이스나 외부 API 호출이 많은 서비스에서 효과적입니다. ([Spring Boot 공식 프로젝트 페이지](https://spring.io/projects/spring-boot#overview))

- **JVM 및 메트릭 튜닝**: Micrometer를 활용해 실시간 지연시간 모니터링과 GC, 스레드 풀 튜닝을 병행하면 지연시간 변동성을 줄일 수 있습니다. ([Martin Fowler - Observability in Microservices](https://martinfowler.com/articles/observability-in-microservices.html))

- **클라우드 네이티브 환경 최적화**: 컨테이너 리소스 제한과 오토스케일링 설정으로 p95 지연시간을 안정적으로 관리합니다. ([Cloudflare Blog](https://blog.cloudflare.com/cloud-native-performance-optimization/))

## Implementation

### 1. 네이티브 이미지 빌드 적용

Spring Boot 3는 GraalVM 네이티브 이미지 빌드를 공식 지원합니다. 네이티브 이미지는 JVM 시작 오버헤드를 제거해 빠른 시작과 낮은 메모리 사용을 가능하게 합니다.

```bash
# GraalVM 설치 후, native-image 빌드 플러그인 추가
./mvnw spring-boot:build-image -Dspring-boot.build-image.imageName=myapp-native
```

운영 환경에서는 네이티브 이미지가 초기화 지연을 크게 줄이지만, 빌드 시간이 길고 일부 리플렉션 사용 라이브러리 호환성 문제에 주의해야 합니다.

### 2. Reactive WebFlux 전환

기존 Spring MVC 기반 REST API를 WebFlux로 전환하면 논블로킹 I/O 처리가 가능해집니다.

```java
@RestController
public class UserController {

    private final UserRepository userRepository;

    public UserController(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @GetMapping("/users/{id}")
    public Mono<ResponseEntity<User>> getUser(@PathVariable String id) {
        return userRepository.findById(id)
                .map(user -> ResponseEntity.ok(user))
                .defaultIfEmpty(ResponseEntity.notFound().build());
    }
}
```

운영 시 주의할 점은 WebFlux가 모든 라이브러리와 호환되지 않을 수 있으므로, 데이터베이스 드라이버나 외부 API 클라이언트가 논블로킹을 지원하는지 확인해야 합니다.

### 3. Micrometer 기반 메트릭 수집 및 JVM 튜닝

Micrometer를 통해 p95 지연시간을 포함한 다양한 메트릭을 수집합니다.

```java
@Bean
public Timer requestLatencyTimer(MeterRegistry registry) {
    return Timer.builder("http.server.requests.latency")
            .publishPercentiles(0.5, 0.95, 0.99)
            .register(registry);
}
```

JVM 옵션 예시:

```bash
-Xms4g -Xmx4g -XX:+UseG1GC -XX:MaxGCPauseMillis=100
```

스레드 풀 크기도 적절히 조정해야 하며, 예를 들어 Tomcat 스레드 풀 설정:

```yaml
server:
  tomcat:
    max-threads: 200
    min-spare-threads: 20
```

### 4. 클라우드 네이티브 리소스 관리

컨테이너 리소스 제한과 오토스케일링 설정 예시(Kubernetes):

```yaml
resources:
  limits:
    cpu: "500m"
    memory: "512Mi"
  requests:
    cpu: "250m"
    memory: "256Mi"

---

apiVersion: autoscaling/v2
kind: HorizontalPodAutoscaler
metadata:
  name: springboot-app-hpa
spec:
  scaleTargetRef:
    apiVersion: apps/v1
    kind: Deployment
    name: springboot-app
  minReplicas: 2
  maxReplicas: 10
  metrics:
  - type: Resource
    resource:
      name: cpu
      target:
        type: Utilization
        averageUtilization: 70
```

## Pitfalls

- **네이티브 이미지 빌드 제한**: 일부 라이브러리(특히 리플렉션, 동적 프록시 사용)는 네이티브 이미지에서 제대로 작동하지 않을 수 있습니다. 빌드 시 `native-image.properties`로 명시적 설정이 필요합니다.

- **Reactive WebFlux 호환성 문제**: 모든 서드파티 라이브러리가 논블로킹을 지원하지 않으므로, 동기 라이브러리 사용 시 블로킹이 발생해 오히려 지연시간이 증가할 수 있습니다.

- **과도한 JVM 튜닝**: GC 튜닝을 잘못하면 오히려 긴 GC 정지가 발생할 수 있으므로, 프로파일링과 모니터링을 병행해야 합니다.

- **리소스 제한 미설정**: 컨테이너 리소스 제한을 하지 않으면, 노드 리소스 고갈로 인해 전체 서비스 지연시간이 악화될 수 있습니다.

- **메트릭 과다 수집**: 너무 많은 메트릭을 수집하면 애플리케이션 성능에 부정적 영향을 줄 수 있으므로, 필요한 지표만 선별해야 합니다.

## Practical Checklist

- [ ] GraalVM 네이티브 이미지 빌드 테스트 및 호환성 검증
- [ ] 주요 API를 WebFlux 기반 논블로킹 처리로 전환
- [ ] Micrometer로 p95 지연시간 포함 핵심 메트릭 수집 설정
- [ ] JVM GC 및 스레드 풀 설정 최적화 (프로파일링 기반)
- [ ] 컨테이너 리소스 제한 및 오토스케일링 정책 적용
- [ ] 서드파티 라이브러리 논블로킹 호환성 점검
- [ ] 메트릭 수집량과 성능 영향 모니터링
- [ ] 운영 환경에서 p95 지연시간 지속 모니터링 및 알림 설정

## References

- [Spring Boot 3.0 Goes GA](https://spring.io/blog/2023/11/24/spring-boot-3-0-goes-ga) (2023-11-24)
- [Spring Boot 공식 프로젝트 페이지](https://spring.io/projects/spring-boot#overview) (2023-11-24)
- [Martin Fowler - Observability in Microservices](https://martinfowler.com/articles/observability-in-microservices.html) (2023-10-10)
- [Cloudflare Blog - Cloud Native Performance Optimization](https://blog.cloudflare.com/cloud-native-performance-optimization/) (2023-12-05)


## 운영 적용 메모

아래는 실무 적용 시 바로 점검해야 할 세부 항목입니다.

- 서비스별 위험도(높음/중간/낮음)를 분류하고, 위험도가 높은 경로부터 점진 배포를 적용합니다.
- 기능 배포 전후 지표 비교 구간을 동일하게 유지해 해석 오류를 방지합니다.
- 장애 알림은 담당 팀, 임계치, 대응 절차를 하나의 런북으로 연결합니다.
- 비용 최적화와 성능 최적화를 분리하지 않고 동일 대시보드에서 함께 추적합니다.
- 릴리즈 회고 시 성공 사례뿐 아니라 실패 사례를 반드시 문서화합니다.

### 근거 요약

1. Spring Boot 3에서는 네이티브 이미지 지원을 통해 애플리케이션 시작 시간과 메모리 사용량을 크게 줄여 p95 지연시간 최적화에 효과적이다. (Spring Boot 3.0 Goes GA)
2. Spring Boot 3에서 Reactive WebFlux를 활용하면 비동기 논블로킹 처리로 p95 지연시간을 줄일 수 있으며, 특히 I/O 병목이 많은 서비스에서 효과적이다. (Spring Boot 공식 프로젝트 페이지)
3. JVM 튜닝과 함께 Spring Boot 3의 Micrometer 기반 메트릭 수집을 활용하여 p95 지연시간을 모니터링하고, GC 튜닝 및 스레드 풀 최적화를 통해 지연시간을 줄일 수 있다. (Martin Fowler - Observability in Microservices)
4. Cloudflare의 최신 블로그에 따르면, 클라우드 네이티브 환경에서 Spring Boot 3 애플리케이션을 컨테이너화하고, 적절한 리소스 제한과 오토스케일링 설정을 통해 p95 지연시간을 안정적으로 관리할 수 있다. (Cloudflare Blog - Cloud Native Performance Optimization)

### 팀 운영 권장사항

1. 월간 기술 부채 점검과 함께 배포 정책을 갱신합니다.
2. 핵심 API에 대한 장애 복구 리허설을 분기별로 수행합니다.
3. 신규 기술 도입 시 성능·보안·비용의 3축 검증표를 유지합니다.
4. 개인 의존성을 줄이기 위해 운영 체크리스트를 템플릿화합니다.

- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
- 운영 점검 항목: 지표 분석 기준, 알림 임계치 정의, 장애 복구 시나리오 검증, 배포 후 회고 기록, 아키텍처 의사결정 근거 문서화를 한 사이클로 반복합니다.
